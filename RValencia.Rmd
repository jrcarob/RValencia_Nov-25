---
title: "`airqualityEs`"
subtitle: "Un Paquete de R para Acceder a Datos de Contaminaci√≥n del Aire en Espa√±a <br> IV Congreso & XV Jornadas de Usuarios de R <br> 6-7 Noviembre, 2025 ‚Ä¢ Valencia "
author: '<i class="fa fa-copyright fa-fw"></i>Jos√© Vicente Die Ram√≥n<i class="fa fa-creative-commons fa-fw"></i><a href="mailto:z42diraj@uco.es"><i class="fa fa-paper-plane fa-fw"></i>z42diraj@uco.es</a><br> <i class="fa fa-copyright fa-fw"></i>Jos√© Rafael Caro Barrera<i class="fa fa-creative-commons fa-fw"></i><a href="mailto:z52cabaj@uco.es"><i class="fa fa-paper-plane fa-fw"></i>z52cabaj@uco.es</a> <br> Universidad de C√≥rdoba <br><a href="https://cran.r-project.org/package=airqualityES"><i class="fa fa-github fa-fw"></i>10.32614/CRAN.package.airqualityES</a><br>'
#date:
output:
  xaringan::moon_reader:
    lib_dir: libs
    #seal: false
    css: [custom.css, "hygge"] #, metropolis, metropolis-fonts
    nature:
      beforeInit: ["macros.js", "https://platform.twitter.com/widgets.js"] # first is for rescaling images , second is for embedding tweets, https://github.com/yihui/xaringan/issues/100
      highlightStyle: ocean #rainbow #monokai rainbow solarized-light #tomorrow-night -blue -eighties zenburn
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
      slideNumberFormat: |
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
          <div class="footer">¬© J.R. Caro Barrera
          </div>
          </div>
        </div>
    includes:
      in_header: header.html # for font awesome, used in title  
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(echo=F,
                      message=F,
                      warning=F,
                      fig.retina=3,
                      fig.align = "center")
library("tidyverse")
library("fontawesome")
xaringanExtra::use_tile_view()
xaringanExtra::use_tachyons()

theme_slides <- theme_light() + 
  theme(
    text = element_text(family = "Fira Sans", size = 24)
  )
```

class: inverse

# _Outline_

### [1. Autores](#3)
### [2. Origen y Motivaci√≥n](#4)
.white[‚Ä¢ Recopilar Datos del _Miteco:_ una Misi√≥n "casi" Imposible... si decides aceptarla]<br>
### [3. Instalaci√≥n y Funcionalidades](#13)
### [Aplicaci√≥n: Confinamiento Humano vs. Saneamiento Atmosf√©rico ](#22)
### [Aplicaci√≥n: ¬øSon las _Fallas de Valencia_ un fallo para el Medioambiente? ](#24)

---

# 1. Autores

.center[
![:scale 80%](../img/both.png)

]

---

class: inverse, middle

# La _insoportable gravedad_ de trabajar con datos de organismos oficiales espa√±oles:<br> el caso del _Miteco_

> .white[_"In God we trust, all others bring data."_].fuente[W. Edwards Deming, *Estad√≠stico estadounidense.*]

> .white[_"Data is the new oil."_].fuente[Clive Humby, *Matem√°tico brit√°nico.*]

---

# 2. Origen y Motivaci√≥n


![:scale 99%](../img/miteco1.png)

---

# 2. Origen y Motivaci√≥n

Todo es... <font size="7">üòä</font>

![:scale 99%](../img/miteco1a.png)

---

# 2. Origen y Motivaci√≥n

... y avanzamos...<font size="7">üòÖ</font>

![:scale 99%](../img/miteco2.png)

---

# 2. Origen y Motivaci√≥n

... y seguimos..., hasta que, .hi-pink[¬°por fin...!]

.left-column[

![:scale 70%](../img/pascal1.png)
]

.right-column[

![:scale 90%](../img/miteco3.png)
]

---

# 2. Origen y Motivaci√≥n

Sin embargo,... .<font size="7">ü•µ</font>

.left-column[

![:scale 70%](../img/pascal2.png)

]

.right-column[

![:scale 90%](../img/miteco4.png)

]

---

# 2. Origen y Motivaci√≥n

## ... y as√≠...<font size="7">üò§</font>

.left-column[

- .hi-pink[A√±o 2023] <font size="7">ü§¨</font>

![:scale 80%](../img/miteco5.png)
]

.right-column[

- .hi-pink[A√±o 2010] <font size="7">ü§Ø</font>

![:scale 99%](../img/miteco6.png)

]
---

- .hi-purple[2001 - 2011: cada contaminante se presenta en fichero `.xlsx`]

- .hi-purple[2012: cada contaminante se presenta en fichero `.xlsx` y `.csv`]

- .hi-purple[2013: cada contaminante se presenta en fichero `.csv`]

- .hi-purple[2014 - 2016: cada contaminante se presenta en fichero `.xlsx`]

- .hi-purple[2017 - 2022 : cada contaminante se presenta en fichero `.csv`]

.bg-washed-red.b--dark-red.ba.bw2.br3.shadow-5.ph3.mt1[

## > 130 ficheros en m√∫ltiples formatos <font size="10">ü§Øü§Øü§Ø</font>

]

---

## .hi-purple[Resumiendo:<br> ¬°caos, pesadilla, debacle, descontrol, frustraci√≥n, llantos, l√°grimas,...!]

.center[
![:scale 75%](../img/chaotic.jpg)
]

---

class: inverse, middle

# El paquete `airqualityEs`

> .white["_The purpose of (data) display is comparison (recognition of phenomena), not numbers... The phenomena are the main actors, numbers are supporting cast._"]<br>.fuente[John Tukey, 1973, *Estad√≠stico estadounidense.*]

---

# 3. Instalaci√≥n y Funcionalidades

.pull-left[
- Conjunto de datos que contiene .hi-purple[mediciones diarias de la calidad del aire en Espa√±a durante un periodo de 22 a√±os (de 2001 a 2022)]. Las mediciones se refieren a varios contaminantes:

- .hi-pink[PM<sub>10</sub>] y .hi-pink[PM<sub>2.5</sub>]
- .hi-pink[Pb] 
- .hi-pink[Cd] 
- .hi-pink[As] 
- .hi-pink[Ni]
- .hi-pink[C<sub>6</sub>H<sub>6</sub>]
]

--

.pull-right[

- Son **datos publicados abiertamente** por el _Gobierno de Espa√±a_. 

- Los conjuntos de datos estaban **originalmente repartidos en varios archivos y formatos**. 

- .hi-green[Aportaci√≥n:] la misma informaci√≥n se encuentra en `airqualityES` en un sencillo marco de datos para facilitar la consulta a investigadores, periodistas o al p√∫blico en general.

]


---

# 3. Instalaci√≥n y Funcionalidades

```{r simple_code, echo = TRUE, eval = FALSE}
install.packages("airqualityES")
```

La √∫ltima versi√≥n en desarrollo del paquete tambi√©n se puede cargar directamente desde GitHub utilizando el paquete devtools:

```{r simple_code2, echo = TRUE, eval = FALSE}
library(devtools)
install_github("jdieramon/airqualityES")
library(airquality)
```

--

- .hi-pink[What's new?]

  - `v.1.1.0` .hi-purple[29-02-2020 Lanzamiento]
  - `v.1.2.0` .hi-red[XX-11-2025 Primera actualizaci√≥n]
      - Data update: 2019 - actual
      - Introducci√≥n de un nuevo contaminante: **benzo[a]pyrene**
    
---

# 3. Instalaci√≥n y Funcionalidades

.pull-left-3[
- **A√±os:** .hi-purple[2001 - 2022]
.center[
![:scale 75%](../img/tibble1.png)
]
]

.pull-middle-3[
- **Contaminantes:** .hi-purple[8]
.center[
![:scale 90%](../img/tibble2.png)
]
]

.pull-right-3[
- **Ciudades:** .hi-purple[190]<br>
- **Estaciones:** .hi-purple[779]
.left[
![:scale 100%](../img/tibble3.png)
]

]

---

# 3. Instalaci√≥n y Funcionalidades

.center[

.hi-purple[## .purple[Matriz: 160.114 x 36]] 

![:scale 99%](../img/matrix.png)

]

---

# 3. Instalaci√≥n y Funcionalidades

## Principio de Datos Ordenados `tidydata`

.pull-left[

- `pivot_longer()` 
  - cada .hi-pink[variable] en una .hi-pink[columna]
  - cada .hi-purple[observaci√≥n] en una .hi-purple[fila]
  - cada .hi-green[valor] en una .hi-green[celda]

- permite **agrupar**, **filtrar**, **resumir** 
 
 
]

.pull-right[

![:scale 99%](../img/tidy.png)

]

--

.bg-washed-green.b--dark-greem.ba.bw2.br3.shadow-5.ph3.mt1[

Facilita an√°lisis y visualizaci√≥n para:

-  Descubrir patrones y plantear hip√≥tesis.

]

---

class: inverse, middle

# Repercusiones Atmosf√©ricas del Confinamiento: ¬øFue ... para la Atm√≥sfera? 

> .white[_"Graphics is the visual means of resolving logical problems."_] .fuente[Jacques Bertin, *Graphics and Graphic Information Processing (2011).*]

---

## .purple[Efecto del Confinamiento en la ciudad de Valencia]

![:scale 99%](../img/patterns.png)
Niveles de contaminaci√≥n diarios para part√≠culas PM2.5 durante los meses enero-junio 
para 2019 y 2020.

---

class: inverse, middle

# El fallo de _Las Fallas:_ ¬øson _Las Fallas_ un elemento contaminante para la atm√≥sfera? 


> .white[_"...But is not always clear which 1000 words."_] .fuente[John Tukey, 1973, *Estad√≠stico estadounidense*]

---

## .purple[¬øSon las fiestas locales una fuente de contaminaci√≥n atmosf√©rica?]

.center[
![:scale 80%](../img/PM25c.png)
]

---

class: middle, inverse, center

# Gracias

.center[

### Jos√© V. Die Ram√≥n

### Jos√© R. Caro Barrera

]


---